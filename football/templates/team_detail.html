{% extends 'base.html' %}
{% load static %}

{% block title %}{{ team.name }}{% endblock %}

{% block content %}

<!-- –®–ê–ü–ö–ê –ö–û–ú–ê–ù–î–´ -->
<div class="team-header">
    <div class="team-header-logo">
        {% if team.emblem %}
            <img src="{% static 'emblems/' %}{{ team.emblem }}" alt="{{ team.name }}">
        {% else %}
            <span>{{ team.name|slice:":2"|upper }}</span>
        {% endif %}
    </div>
    <div class="team-header-main">
        <div class="team-header-title-line">
            <h1 class="team-header-name">{{ team.name }}</h1>
            {% if team.city %}
                <span class="team-header-short">{{ team.city }}</span>
            {% endif %}
        </div>
        <div class="team-header-meta">
            {% if team.coach %}
                –¢—Ä–µ–Ω–µ—Ä: <strong>{{ team.coach }}</strong>
            {% else %}
                –¢—Ä–µ–Ω–µ—Ä: <span class="muted">–Ω–µ —É–∫–∞–∑–∞–Ω</span>
            {% endif %}
            {% if team_row %}
                ¬∑ –ú–∞—Ç—á–µ–π: {{ team_row.games }},
                –≥–æ–ª—ã: {{ team_row.goals_for }}‚Äì{{ team_row.goals_against }},
                –æ—á–∫–∏: {{ team_row.points }}
            {% endif %}
        </div>
    </div>
    <div class="team-header-actions">
        <a href="{% url 'team_edit' team.id %}" class="btn btn-ghost btn-small">
            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
        </a>
        <a href="{% url 'team_squad_edit' team.id %}" class="btn btn-ghost btn-small">
            üë• –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤
        </a>
        <a href="{% url 'team_delete' team.id %}" class="btn btn-danger btn-small">
            üóë –£–¥–∞–ª–∏—Ç—å
        </a>
    </div>
</div>

<div class="team-page-layout">

    <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –°–û–°–¢–ê–í -->
    <section class="team-block">
        <div class="team-block-header">
            <div>
                <h2 class="team-block-title">–°–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã</h2>
                <p class="team-block-subtitle">
                    –ò–≥—Ä—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–æ —Å—Ç–∞—Ä—Ç—É –∏–ª–∏ –≤—ã—Ö–æ–¥—É –Ω–∞ –∑–∞–º–µ–Ω—É. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–ª—å–∫–æ –∑–∞ {{ team.name }}.
                </p>
            </div>
        </div>

        {% if squad %}
            <table class="table team-players-table">
                <thead>
                    <tr>
                        <th style="width:40px;">‚Ññ</th>
                        <th>–ò–≥—Ä–æ–∫</th>
                        <th>–ê–º–ø–ª—É–∞</th>
                        <th class="cell-num">–ò–≥—Ä—ã</th>
                        <th class="cell-num">–ì–æ–ª—ã</th>
                        <th class="cell-num">–ü–∞—Å—ã</th>
                        <th class="cell-num">–ñ–ö</th>
                        <th class="cell-num">–ö–ö</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in squad %}
                        <tr>
                            <td class="cell-num">{{ row.number|default:"" }}</td>
                            <td>
                                <a href="{% url 'player_detail' row.tp.player.id %}" class="link">
                                    {{ row.tp.player.first_name }} {{ row.tp.player.last_name }}
                                </a>
                            </td>
                            <td>
                                {% if row.tp.player.position %}
                                    {{ row.tp.player.get_position_display }}
                                {% else %}
                                    <span class="muted">-</span>
                                {% endif %}
                            </td>
                            <td class="cell-num">{{ row.games }}</td>
                            <td class="cell-num strong">{{ row.goals }}</td>
                            <td class="cell-num strong">{{ row.assists }}</td>
                            <td class="cell-num">{{ row.yellow }}</td>
                            <td class="cell-num">{{ row.red }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="muted">–í —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–µ –µ—â—ë –Ω–µ—Ç –∏–≥—Ä–æ–∫–æ–≤.</p>
        {% endif %}
    </section>

    <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –ú–ê–¢–ß–ò –ö–û–ú–ê–ù–î–´ -->
    <section class="team-block">
        <div class="team-block-header">
            <div>
                <h2 class="team-block-title">–ú–∞—Ç—á–∏ –∫–æ–º–∞–Ω–¥—ã</h2>
                <p class="team-block-subtitle">
                    –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã —Å —É—á–∞—Å—Ç–∏–µ–º {{ team.name }}
                </p>
            </div>
            <div>
                <a href="{% url 'match_list' %}" class="btn btn-ghost btn-small">
                    –í—Å–µ –º–∞—Ç—á–∏
                </a>
            </div>
        </div>

        {% if matches %}
            <table class="table team-matches-table">
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–ú–∞—Ç—á</th>
                        <th class="cell-num">–°—á—ë—Ç</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                    </tr>
                </thead>
                <tbody>
                    {% for m in matches %}
                        <tr>
                            <td>{{ m.date|date:"d.m.Y H:i" }}</td>
                            <td>
                                <a href="{% url 'match_detail' m.id %}" class="link">
                                    {{ m.home_team.name }} ‚Äî {{ m.away_team.name }}
                                </a>
                            </td>
                            <td class="cell-num">
                                {% if m.home_goals is not None and m.away_goals is not None %}
                                    {{ m.home_goals }} : {{ m.away_goals }}
                                {% else %}
                                    - : -
                                {% endif %}
                            </td>
                            <td>{{ m.get_status_display }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="muted">–ú–∞—Ç—á–µ–π —Å —É—á–∞—Å—Ç–∏–µ–º —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –ø–æ–∫–∞ –Ω–µ—Ç.</p>
        {% endif %}
    </section>

</div>

{% endblock %}
